<%- content_for(:page_title) { @repository.translate.title(:show, record: @record) } %>

<%= render(
  Uchi::Ui::PageHeader.new(
    description: @repository.translate.description(:show, record: @record),
    title: @repository.translate.title(:show, record: @record),
  )
) do |header| %>
  <% header.with_action do %>
    <%= button_to(
      @repository.translate.link_to_destroy(@record),
      @repository.routes.path_for(:destroy, id: @record.id),
      method: :delete,
      class: Flowbite::Button.classes(style: :red),
      data: {
        :"turbo-confirm" => @repository.translate.destroy_dialog_title(@record)
      }
    ) %>
  <% end %>

  <% header.with_action do %>
    <%= link_to(@repository.translate.link_to_edit(@record), @repository.routes.path_for(:edit, id: @record.id), class: Flowbite::Button.classes) %>
  <% end %>

  <% header.with_breadcrumb(items: [
      {href: @repository.routes.root_path, label: Rails.application.name.titlecase },
      {href: @repository.routes.path_for(:index), label: @repository.translate.breadcrumb_label(:index) },
      {href: @repository.routes.path_for(:show, id: @record.id), label: @repository.translate.breadcrumb_label(:show, record: @record) }
    ]) %>
<% end %>

<%= render(Uchi::Ui::Show::AttributeFields.new(
  attribute_fields: @repository.fields_for_show.select { |field| field.group_as(:show) == :attributes },
  record: @record,
  repository: @repository
)) %>

<% association_fields = @repository.fields_for_show.select{ |field| field.group_as(:show) == :associations } %>
<% association_fields.each do |field| %>
  <%= render(field.show_component(record: @record, repository: @repository)) %>
<% end %>
